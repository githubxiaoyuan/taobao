"use strict";!function(){var e=document.querySelector(".pwd-login-tab"),t=document.querySelector(".sms-login-tab"),o=document.querySelector(".login-pwd"),n=document.querySelector(".login-phone");e.onclick=function(){o.style.display="block",n.style.display="none",this.className="activity pwd-login-tab",t.className="sms-login-tab"},t.onclick=function(){o.style.display="none",n.style.display="block",this.className="activity sms-login-tab",e.className="pwd-login-tab"}}(),function(){var t=location.search.substr(location.search.indexOf("=")+1),e=document.querySelector(".login-pwd-submit"),o=document.querySelector(".login-error"),n=document.querySelector(".pwd-login-error"),l=document.querySelector(".login-username"),r=document.querySelector(".login-password");e.onclick=function(e){return(e=e||window.event).preventDefault?e.preventDefault():returnValue=!1,""==l.value.trim()?(o.style.display="block",n.innerText="请输入账户名",l.focus()):""==r.value.trim()?(o.style.display="block",n.innerText="请输入密码",r.focus()):(o.style.display="none",void $.ajax({url:"/api/login",method:"POST",data:{username:l.value,password:r.value},success:function(e){if(1!==e.status)return o.style.display="block",void(n.innerText="登录名或登录密码不正确");layui.use("layer",function(){layui.layer.msg("登陆成功！"),localStorage.setItem("token","Bearer "+e.token),setTimeout(function(){return location.href=t||"./index.html"},1500)})},error:function(){layui.use("layer",function(){layui.layer.msg("登陆失败，请检查网络设置！")})}}))};var i=(e=document.querySelector(".login-phone")).querySelector(".login-error"),u=e.querySelector(".phone-login-error"),a=e.querySelector(".login-telnumber"),c=e.querySelector(".login-verify-code"),e=e.querySelector(".login-phone-submit"),s=/^1(3[0-9]|4[01456879]|5[0-3,5-9]|6[2567]|7[0-8]|8[0-9]|9[0-3,5-9])\d{8}$/;e.onclick=function(e){return(e=e||window.event).preventDefault?e.preventDefault():returnValue=!1,""==a.value.trim()?(i.style.display="block",u.innerText="请输入手机号",a.focus()):s.test(a.value.trim())?""==c.value.trim()?(i.style.display="block",u.innerText="请输入验证码",c.focus()):(o.style.display="none",void $.ajax({method:"POST",url:"http://127.0.0.1/api/loginphone",data:$(".login-phone form").serialize(),success:function(e){}})):(i.style.display="block",u.innerText="手机号码格式不正确，请重新输入",a.focus())}}();