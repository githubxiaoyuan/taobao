"use strict";function controlElements(){var e=document.querySelector(".side-bottom-block-bg1"),t=document.querySelector(".side-bottom-block-bg2"),n=document.getElementById("content"),a=document.documentElement.offsetWidth,o=document.getElementById("main").offsetWidth,s=document.body,i=document.getElementById("main"),l=document.querySelectorAll(".side-block-bg"),r=document.getElementById("fixedSiderBar");window.onresize=function(){e.style.left=n.offsetLeft-e.offsetWidth+"px",t.style.right=n.offsetLeft-t.offsetWidth+"px",r.style.left=i.offsetLeft+i.offsetWidth+10+"px",a=document.documentElement.offsetWidth,o<=a?(s.style.overflowX="hidden",l[0].style.display="block",l[1].style.display="block"):(s.style.overflowX="auto",l[0].style.display="none",l[1].style.display="none")},window.onload=function(){e.style.left=n.offsetLeft-e.offsetWidth+"px",t.style.right=n.offsetLeft-t.offsetWidth+"px",r.style.left=i.offsetLeft+i.offsetWidth+10+"px",a=document.documentElement.offsetWidth,o<=a?(s.style.overflowX="hidden",l[0].style.display="block",l[1].style.display="block"):(s.style.overflowX="auto",l[0].style.display="none",l[1].style.display="none")}}function noticeSwitch(){for(var n=document.getElementsByClassName("notice-tab"),a=document.getElementsByClassName("notice-list"),e=0;e<n.length;e++){n[e].setAttribute("data-index",e);var o=null;n[e].onmouseenter=function(){var t=this.getAttribute("data-index");o=setTimeout(function(){for(var e=0;e<n.length;e++)n[e].className="notice-tab",a[e].className="notice-list clearfix";n[t].className="notice-tab notice-tab-select",a[t].className="notice-list notice-list-visible clearfix",clearTimeout(o)},350)},n[e].onmouseleave=function(){clearTimeout(o)}}}function siderPosition(){var t=document.querySelector(".returnTop"),n=document.querySelector(".sider-bar"),a=document.getElementById("main"),o=document.getElementById("content"),s=document.getElementsByClassName("sider-bar-item"),i=document.getElementById("fixedSearch"),l=document.getElementById("discoverGoods"),r=document.getElementById("tbLive"),d=document.getElementById("hotSales"),c=document.getElementById("guessLike"),m=!0;window.addEventListener("scroll",function(){if(300<=document.documentElement.scrollTop?i.style.display="block":i.style.display="none",470<=document.documentElement.scrollTop?(n.style.position="fixed",n.style.top="70px",n.style.left=a.offsetLeft+a.offsetWidth+10+"px"):(n.style.left=a.offsetLeft+a.offsetWidth+10+"px",n.style.position="absolute",n.style.top="500px"),750<=document.documentElement.scrollTop?t.style.display="block":t.style.display="none",m)if(document.documentElement.scrollTop<r.offsetTop+o.offsetTop){for(var e=0;e<s.length;e++)s[e].className="sider-bar-item";s[0].className="nav-activity sider-bar-item"}else if(document.documentElement.scrollTop>=r.offsetTop+o.offsetTop&&document.documentElement.scrollTop<d.offsetTop+o.offsetTop){for(e=0;e<s.length;e++)s[e].className="sider-bar-item";s[1].className="nav-activity sider-bar-item"}else if(document.documentElement.scrollTop>=d.offsetTop+o.offsetTop&&document.documentElement.scrollTop<c.offsetTop+o.offsetTop){for(e=0;e<s.length;e++)s[e].className="sider-bar-item";s[2].className="nav-activity sider-bar-item"}else if(document.documentElement.scrollTop>=c.offsetTop+o.offsetTop+2){for(e=0;e<s.length;e++)s[e].className="sider-bar-item";s[3].className="nav-activity sider-bar-item"}}),t.addEventListener("click",function(){animate2(window,0)}),s[0].onclick=function(){m=!1;for(var e=0;e<s.length;e++)s[e].className="sider-bar-item";s[0].className="nav-activity sider-bar-item",animate2(window,l.offsetTop+o.offsetTop,function(){m=!0})},s[1].onclick=function(){m=!1;for(var e=0;e<s.length;e++)s[e].className="sider-bar-item";s[1].className="nav-activity sider-bar-item",animate2(window,r.offsetTop+o.offsetTop+2,function(){m=!0})},s[2].onclick=function(){m=!1;for(var e=0;e<s.length;e++)s[e].className="sider-bar-item";s[2].className="nav-activity sider-bar-item",animate2(window,d.offsetTop+o.offsetTop+2,function(){m=!0})},s[3].onclick=function(){m=!1;for(var e=0;e<s.length;e++)s[e].className="sider-bar-item";s[3].className="nav-activity sider-bar-item",animate2(window,c.offsetTop+o.offsetTop+2,function(){m=!0})}}function animate2(t,n,a){clearInterval(t.timer),t.timer=setInterval(function(){var e=0<(e=(n-window.pageYOffset)/10)?Math.ceil(e):Math.floor(e);parseInt(window.pageYOffset)==n&&(clearInterval(t.timer),a&&a()),window.scroll(0,window.pageYOffset+e)},15)}function tbSwiperFn(){for(var e=document.getElementById("tbBanner"),t=document.getElementById("tbSwiper"),n=t.children,a=n.length,o=n[0].cloneNode(!0),s=n[n.length-1].cloneNode(!0),i=n[0].offsetWidth,l=document.getElementById("tbSwiperTabs"),r=0;r<n.length;r++){var d=document.createElement("li");d.className="tb-banner-tab",l.appendChild(d)}var c=l.children;t.appendChild(o),t.insertBefore(s,n[0]);var m=0;c[m].className="tb-banner-tab tab-activity";var u=setInterval(function(){f()},2e3);function f(){m==a-1?(c[m].className="tb-banner-tab",t.style.left="0px",animate(t,-i*((m=0)+1)),c[m].className="tb-banner-tab tab-activity"):(c[m].className="tb-banner-tab",c[++m].className="tb-banner-tab tab-activity",animate(t,-i*(m+1)))}t.style.left=-i+"px",e.onmouseover=function(){clearInterval(u)},e.onmouseout=function(){u=setInterval(function(){f()},2e3)};s=document.getElementById("tbSwiperPreBtn"),e=document.getElementById("tbSwiperNextBtn");s.onclick=function(){0==m?(c[m].className="tb-banner-tab",m=a-1,t.style.left=-i*(m+2)+"px",c[m].className="tb-banner-tab tab-activity"):(c[m].className="tb-banner-tab",c[--m].className="tb-banner-tab tab-activity"),animate(t,-i*(m+1))},e.onclick=function(){f()};for(r=0;r<c.length;r++)c[r].setAttribute("data-index",r),c[r].onclick=function(){c[m].className="tb-banner-tab",m=parseInt(this.getAttribute("data-index")),c[m].className="tb-banner-tab tab-activity",animate(t,-i*(m+1))}}function tmSwiperFn(){var e=document.getElementById("tmBanner"),t=document.getElementById("tmSwiper"),n=t.children,a=n.length,o=n[0].cloneNode(!0),s=n[n.length-1].cloneNode(!0),i=n[0].offsetWidth,l=document.getElementById("tmSwiperTabs"),r=document.getElementById("tmSwiperProgressNum"),d=l.children;t.appendChild(o),t.insertBefore(s,n[0]);var c=0;d[c].className="tm-banner-progress-item progress-activity",r.innerText=c+1;var m=setInterval(function(){u()},3e3);function u(){c==a-1?(d[c].className="tm-banner-progress-item",t.style.left="0px",c=0,r.innerText=c+1,animate(t,-i*(c+1)),d[c].className="tm-banner-progress-item progress-activity"):(d[c].className="tm-banner-progress-item",c++,r.innerText=c+1,d[c].className="tm-banner-progress-item progress-activity",animate(t,-i*(c+1)))}t.style.left=-i+"px",e.onmouseover=function(){clearInterval(m)},e.onmouseout=function(){m=setInterval(function(){u()},3e3)};n=document.getElementById("tmSwiperPreBtn"),e=document.getElementById("tmSwiperNextBtn");n.onclick=function(){0==c?(d[c].className="tm-banner-progress-item",c=a-1,r.innerText=c+1,t.style.left=-i*(c+2)+"px"):(d[c].className="tm-banner-progress-item",c--,r.innerText=c+1),d[c].className="tm-banner-progress-item progress-activity",animate(t,-i*(c+1))},e.onclick=function(){u()};for(var f=0;f<d.length;f++)d[f].setAttribute("data-index",f),d[f].onclick=function(){d[c].className="tm-banner-progress-item",c=parseInt(this.getAttribute("data-index")),r.innerText=c+1,d[c].className="tm-banner-progress-item progress-activity",animate(t,-i*(c+1))}}function animate(t,n,a){clearInterval(t.timer),t.timer=setInterval(function(){var e=0<(e=(n-t.offsetLeft)/10)?Math.ceil(e):Math.floor(e);t.offsetLeft==n&&(clearInterval(t.timer),a&&a()),t.style.left=t.offsetLeft+e+"px"},10)}function searchTabsSwitch(){for(var t=document.getElementById("searchTabsList").children,e=0;e<t.length;e++)t[e].onclick=function(){for(var e=0;e<t.length;e++)t[e].className="";this.className="search-tab-select"}}function rederConveSprite(){for(var e=document.getElementsByClassName("conve-item-icon"),t=0;t<e.length;t++)e[t].style.backgroundPosition="0px "+44*-t+"px"}function closeQRcode(){var e=document.getElementById("closeQRCodeBox"),t=document.getElementsByClassName("qrcode-box");e.onclick=function(){t[0].style.display="none"}}function renderAsideNav(){layui.use("laytpl",function(){var e=layui.laytpl,t=asideNavTpl.innerHTML,n=document.getElementById("asideNavView");e(t).render([{id:1,data:["女装","内衣","家具"]},{id:2,data:["女鞋","男鞋","箱包"]},{id:3,data:["母婴","童装","玩具"]},{id:4,data:["男装","运动户外"]},{id:5,data:["美妆","彩妆","个护"]},{id:6,data:["手机","数码","企业"]},{id:7,data:["大家电","生活电器"]},{id:8,data:["零食","生鲜","茶酒"]},{id:9,data:["厨具","收纳","清洁"]},{id:10,data:["家纺","家饰","鲜花"]},{id:11,data:["图书音像","文具"]},{id:12,data:["医药保健","进口"]},{id:13,data:["汽车","二手车","用品"]},{id:14,data:["房产","装修家具","建材"]},{id:15,data:["手表","眼镜","珠宝饰品"]}],function(e){n.innerHTML=e}),asideNavSubMenu()})}function asideNavSubMenu(){var e=document.getElementById("asideNavList"),t=document.getElementById("asideNavList").children,n=document.getElementById("asideFloatPannelList"),a=document.getElementById("asideFloatPannelList").children;e.onmouseover=function(){n.style.display="block"},e.onmouseout=function(){n.style.display="none"};for(var o=0;o<t.length;o++)t[o].setAttribute("data-index",o),a[o].setAttribute("data-index",o),t[o].onmouseover=function(){a[this.getAttribute("data-index")].style.display="block",t[this.getAttribute("data-index")].style.backgroundColor="#ffe4dc"},a[o].onmouseover=function(){n.style.display="block",a[this.getAttribute("data-index")].style.display="block",t[this.getAttribute("data-index")].style.backgroundColor="#ffe4dc"},t[o].onmouseout=function(){a[this.getAttribute("data-index")].style.display="none",t[this.getAttribute("data-index")].style.backgroundColor="transparent"},a[o].onmouseout=function(){n.style.display="none",a[this.getAttribute("data-index")].style.display="none",t[this.getAttribute("data-index")].style.backgroundColor="transparent"}}function conveSubCard(){for(var t=document.querySelector(".conve-list").querySelectorAll(".conve-float"),n=document.querySelector(".conve-sub-card-list").querySelectorAll(".conve-sub-card"),e=0;e<t.length;e++)t[e].setAttribute("data-index",e),n[e].setAttribute("data-index",e),t[e].onmouseenter=function(){for(var e=0;e<t.length;e++)n[e].style.display="none",t[e].style.border="1px solid #f4f4f4",t[e].style.borderTopColor="transparent",t[e].style.borderLeftColor="transparent",t[e].style.zIndex="1";this.style.border="1px solid #FF4400",this.style.borderBottom="none",this.style.zIndex="11",n[this.getAttribute("data-index")].style.display="block"};for(var a=document.querySelector(".conve-sub-card-list").querySelectorAll(".close-conve-card"),o=0;o<a.length;o++)a[o].setAttribute("data-index",o),a[o].onclick=function(){n[this.getAttribute("data-index")].style.display="none",t[this.getAttribute("data-index")].style.border="1px solid #f4f4f4",t[this.getAttribute("data-index")].style.borderTopColor="transparent",t[this.getAttribute("data-index")].style.borderLeftColor="transparent",t[this.getAttribute("data-index")].style.zIndex="1"};var s=document.getElementById("travelType1"),i=document.getElementById("travelType2"),l=document.querySelector(".end-travel-date"),r=document.querySelector(".conve-trip-go");s.onclick=function(){r.style.backgroundPosition="0 2px",l.style.display="none"},i.onclick=function(){r.style.backgroundPosition="0 -71px",l.style.display="block"}}function renderIndexUserMod(){layui.use("layer",function(){layui.layer;localStorage.getItem("token")?$.ajax({url:"/user/userInfo",method:"GET",success:function(e){$(".user-module .welcome-text").text("Hi！"+e.data.username),$(".user-module .user-avatar a").html(e.data.username.charAt(0)).css("background-color","#FF8300"),$(".user-module .logout").hide(),$(".user-module .login").show()},error:function(){$(".user-module .welcome-text").text("Hi！你好"),$(".user-module .user-avatar a").html('<img src="images/user-default-avatar.jpg" alt="">'),$(".user-module .login").hide(),$(".user-module .logout").show()}}):($(".user-module .welcome-text").text("Hi！你好"),$(".user-module .user-avatar a").html('<img src="images/user-default-avatar.jpg" alt="">'),$(".user-module .login").hide(),$(".user-module .logout").show())})}function renderLike(){layui.use("layer",function(){var d;$.ajax({url:"/api/goodslist",method:"GET",success:function(e){d=e.data;for(var t,n=[],a=[],o=0;o<10;o++){for(var s=getRandom(0,d.length-1);-1!==n.indexOf(s);)s=getRandom(0,d.length-1);n.push(s),t='<li class="clearfix"><div class="img-wrap"><a href="item.html?id='+d[s].id+'"><img src="'+d[s].goods_img+'" alt=""></a></div><div class="line1"><a href="item.html?id='+d[s].id+'" class="item-title"><img src="images/baoyou.png" alt="">'+d[s].goods_title+'</a></div><div class="line2"><a href="item.html?id='+d[s].id+'" class="comment">评价 <span>'+d[s].cmt_num+'</span></a><a href="item.html?id='+d[s].id+'" class="collect">收藏<span>'+parseInt(d[s].cmt_num)*getRandom(3,15)+'</span></a></div><div class="line3"><a href="item.html?id='+d[s].id+'" class="price-now"><em>¥</em><span>'+d[s].goods_price+'</span></a><a href="item.html?id='+d[s].id+'" class="price-pre"><em>¥</em><span>'+2*d[s].goods_price+'</span></a><a href="item.html?id='+d[s].id+'" class="sell-num"><em>月销</em><span>'+d[s].goods_sales+"</span><em>笔</em></a></div></li>",a.push(t)}$(".hot-product-list ul").html(a.join(""));for(var i,l=[],r=[],o=0;o<80;o++){for(s=getRandom(0,d.length-1);-1!==l.indexOf(s);)s=getRandom(0,d.length-1);l.push(s),i='<li><a href="./item.html?id='+d[s].id+'" class="good-info-wrap"><div class="good-img-wrap"><img src="'+d[s].goods_img+'" alt=""></div><div class="good-info"><h4><img src="images/double12-icon.png" alt="">'+d[s].goods_title+'</h4></div></a><p class="ft-info clearfix"><span class="price"><em class="price-symbol">¥</em>'+d[s].goods_price+'</span><span class="sales">销量:<em class="sale-num">'+d[s].goods_sales+'</em></span></p><div class="mask"><a href="./goodslist.html"><p class="find-similar"><i class="iconfont icon-aixin_shixin"></i>找相似</p><p class="fint-more-similar">发现更多相似的宝贝<i class="iconfont icon-jiantou"></i></p></a></div></li>',r.push(i)}$(".guess-like-goods-list ul").html(r.join(""))}})})}function getRandom(e,t){return Math.floor(Math.random()*(t-e+1))+e}function getElementsByClassName(e,t){if(e.getElementsByClassName)return e.getElementsByClassName(t);for(var n=[],a=e.getElementsByTagName("*"),o=0,s=a.length;o<s;o++)-1!=a[o].className.indexOf(t)&&(n[n.length]=a[o]);return n}renderIndexUserMod(),controlElements(),siderPosition(),tbSwiperFn(),tmSwiperFn(),searchTabsSwitch(),renderAsideNav(),rederConveSprite(),noticeSwitch(),conveSubCard(),closeQRcode(),renderLike();